# ğŸš€ WAYO - Logistics Route Optimization Platform

> **WAYO** giáº£i quyáº¿t bÃ i toÃ¡n tá»‘i Æ°u hÃ³a lá»™ trÃ¬nh giao hÃ ng (PDPTW - Pickup and Delivery Problem with Time Windows), giÃºp doanh nghiá»‡p giáº£m chi phÃ­ váº­n chuyá»ƒn vÃ  tá»‘i Æ°u sá»‘ lÆ°á»£ng xe.

[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-15-black)](https://nextjs.org/)
[![Node.js](https://img.shields.io/badge/Node.js-20-green)](https://nodejs.org/)
[![C++](https://img.shields.io/badge/C++-17-red)](https://isocpp.org/)
[![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green)](https://supabase.com/)

---

## ğŸ“‹ Má»¥c lá»¥c

- [Tá»•ng quan](#-tá»•ng-quan)
- [Kiáº¿n trÃºc há»‡ thá»‘ng](#-kiáº¿n-trÃºc-há»‡-thá»‘ng)
- [Tech Stack](#-tech-stack)
- [Cáº¥u trÃºc dá»± Ã¡n](#-cáº¥u-trÃºc-dá»±-Ã¡n)
- [Báº¯t Ä‘áº§u nhanh](#-báº¯t-Ä‘áº§u-nhanh)
- [Deployment](#-deployment)
- [Documentation](#-documentation)
- [Contributing](#-contributing)

---

## ğŸ¯ Tá»•ng quan

### Váº¥n Ä‘á» giáº£i quyáº¿t

Má»™t cÃ´ng ty váº­n chuyá»ƒn cÃ³:
- **100 Ä‘Æ¡n hÃ ng** cáº§n giao/nháº­n hÃ´m nay
- **10 xe** vá»›i táº£i trá»ng khÃ¡c nhau
- **Thá»i gian cá»­a sá»•** (time windows) cho má»—i Ä‘iá»ƒm giao/nháº­n

**WAYO tá»‘i Æ°u**:
- âœ… Sá»‘ xe tá»‘i thiá»ƒu cáº§n sá»­ dá»¥ng
- âœ… Tuyáº¿n Ä‘Æ°á»ng ngáº¯n nháº¥t cho má»—i xe
- âœ… Thá»© tá»± pickup/delivery phÃ¹ há»£p
- âœ… TuÃ¢n thá»§ time windows vÃ  táº£i trá»ng

### Use Cases

- ğŸšš **Last-mile delivery** (giao hÃ ng táº­n nÆ¡i)
- ğŸ“¦ **E-commerce logistics** (Shopee, Lazada, Tiki)
- ğŸ¥ **Healthcare logistics** (giao thuá»‘c, máº«u xÃ©t nghiá»‡m)
- ğŸ• **Food delivery** (quáº£n lÃ½ tÃ i xáº¿, tuyáº¿n Ä‘Æ°á»ng)
- ğŸ­ **B2B distribution** (phÃ¢n phá»‘i hÃ ng hÃ³a)

---

## ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Mobile App    â”‚  â† TÃ i xáº¿ xem route, cáº­p nháº­t tráº¡ng thÃ¡i
â”‚    (Kotlin)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚â”€â”€â”€â”€â–¶â”‚    Supabase      â”‚  â† LÆ°u users, routes, drivers
â”‚   (Next.js)     â”‚â—€â”€â”€â”€â”€â”‚   (PostgreSQL)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ REST API (/api/jobs/*)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Backend      â”‚  â† API server, Job queue
â”‚  (Node.js + TS) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ spawn process
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PDPTW Solver   â”‚  â† Thuáº­t toÃ¡n tá»‘i Æ°u (LNS + Fleet Minimization)
â”‚     (C++)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
User táº¡o instance â†’ Frontend POST /api/jobs/submit
                         â†“
            Backend nháº­n request â†’ JobQueue.createJob()
                         â†“
            Job vÃ o hÃ ng Ä‘á»£i (status: pending)
                         â†“
            Worker láº¥y job â†’ SolverWorker.solve()
                         â†“
            Spawn C++ solver â†’ pdptw_solver.exe
                         â†“
            Solver cháº¡y LNS â†’ táº¡o solution
                         â†“
            Worker parse káº¿t quáº£ â†’ Job status: completed
                         â†“
            Frontend polling GET /api/jobs/:id
                         â†“
            Hiá»ƒn thá»‹ routes trÃªn báº£n Ä‘á»“
```

---

## ğŸ› ï¸ Tech Stack

### Backend
- **Runtime**: Node.js 20
- **Framework**: Express.js 4
- **Language**: TypeScript 5
- **Queue**: In-memory EventEmitter (sáº½ migrate sang BullMQ)
- **Solver**: C++17 + CMake

### Frontend
- **Framework**: Next.js 15 (App Router)
- **UI Library**: React 19
- **Styling**: Tailwind CSS
- **Components**: shadcn/ui (Radix UI)
- **Maps**: Mapbox GL JS / Leaflet

### Mobile
- **Language**: Kotlin
- **UI**: Jetpack Compose
- **Architecture**: MVVM + Hilt
- **Maps**: Mapbox Maps SDK

### Database & Auth
- **Database**: Supabase (PostgreSQL)
- **Auth**: Supabase Auth (JWT)
- **Storage**: Supabase Storage

---

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
WAYO/
â”œâ”€â”€ ğŸ“‚ backend/                  # Backend service (Node.js + Express)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.ts           # Entry point
â”‚   â”‚   â”œâ”€â”€ routes/             # API endpoints
â”‚   â”‚   â”œâ”€â”€ queue/              # Job queue management
â”‚   â”‚   â”œâ”€â”€ workers/            # Solver executor
â”‚   â”‚   â””â”€â”€ types/              # TypeScript types
â”‚   â”œâ”€â”€ pdptw_solver_module/    # C++ solver
â”‚   â”‚   â”œâ”€â”€ apps/main.cpp       # Solver entry point
â”‚   â”‚   â”œâ”€â”€ src/                # Algorithm implementation
â”‚   â”‚   â””â”€â”€ build/              # Build output
â”‚   â””â”€â”€ bin/
â”‚       â””â”€â”€ pdptw_solver.exe    # Compiled solver
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                 # Frontend (Next.js)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                # Pages (App Router)
â”‚   â”‚   â”‚   â”œâ”€â”€ dispatch/       # Route assignment UI
â”‚   â”‚   â”‚   â”œâ”€â”€ route-details/  # Route visualization
â”‚   â”‚   â”‚   â””â”€â”€ add-instance/   # Instance builder
â”‚   â”‚   â”œâ”€â”€ components/         # React components
â”‚   â”‚   â”œâ”€â”€ services/           # API clients
â”‚   â”‚   â””â”€â”€ config/             # Configuration
â”‚   â””â”€â”€ public/                 # Static assets
â”‚
â”œâ”€â”€ ğŸ“‚ mobile/                   # Mobile app (Android)
â”‚   â””â”€â”€ app/src/main/java/com/pikasonix/wayo/
â”‚       â”œâ”€â”€ ui/screens/         # Compose screens
â”‚       â”œâ”€â”€ ui/viewmodel/       # ViewModels
â”‚       â””â”€â”€ data/repository/    # Data layer
â”‚
â”œâ”€â”€ ğŸ“‚ supabase/                 # Database & Auth
â”‚   â””â”€â”€ supabase/
â”‚       â””â”€â”€ migrations/         # SQL migrations
â”‚
â””â”€â”€ ğŸ“‚ docs/                     # ğŸ“š Documentation (NEW!)
    â”œâ”€â”€ ai-context/             # AI-specific guides
    â”‚   â”œâ”€â”€ codebase-overview.md   # System overview for AI
    â”‚   â””â”€â”€ common-tasks.md        # Task guides
    â”œâ”€â”€ architecture/           # Architecture docs
    â”œâ”€â”€ guides/                 # Development guides
    â”‚   â””â”€â”€ deployment.md       # Deployment instructions
    â””â”€â”€ api/                    # API reference
```

---

## ğŸš€ Báº¯t Ä‘áº§u nhanh

### Prerequisites

- **Node.js** 20+ ([Download](https://nodejs.org/))
- **npm** hoáº·c **yarn**
- **C++ compiler** (MSVC trÃªn Windows hoáº·c GCC trÃªn Linux)
- **CMake** 3.15+ ([Download](https://cmake.org/))
- **Git** ([Download](https://git-scm.com/))

### 1ï¸âƒ£ Clone Repository

```bash
git clone https://github.com/yourusername/wayo.git
cd wayo
```

### 2ï¸âƒ£ Setup Backend

#### Build C++ Solver

```bash
cd backend/pdptw_solver_module

# Windows
build_and_test.bat

# Linux/Mac
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make
```

#### Install Dependencies & Run

```bash
cd ../..  # Quay vá» backend/
npm install
cp .env.example .env  # Sá»­a file .env vá»›i config cá»§a báº¡n
npm run dev
```

Backend cháº¡y táº¡i: **http://localhost:3001**

### 3ï¸âƒ£ Setup Frontend

```bash
cd ../frontend
npm install
cp .env.local.example .env.local  # Sá»­a file .env.local
npm run dev
```

Frontend cháº¡y táº¡i: **http://localhost:3000**

### 4ï¸âƒ£ Setup Supabase (Optional)

1. Táº¡o project táº¡i [supabase.com](https://supabase.com)
2. Copy URL vÃ  Anon Key
3. Cáº­p nháº­t `.env.local` (frontend) vÃ  `.env` (backend)
4. Run migrations:

```bash
cd supabase
npx supabase db push
```

### 5ï¸âƒ£ Test há»‡ thá»‘ng

1. Má»Ÿ **http://localhost:3000**
2. Táº¡o instance máº«u (Add Instance)
3. Submit job â†’ Äá»£i solver cháº¡y
4. Xem káº¿t quáº£ trÃªn map (Dispatch/Route Details)

---

## ğŸŒ Deployment

### Production Setup

| Service | Platform | URL |
|---------|----------|-----|
| Backend | **Render** | https://wayo-backend.onrender.com |
| Frontend | **Vercel** | https://wayo.vercel.app |
| Database | **Supabase** | https://xxx.supabase.co |

### Quick Deploy

#### Backend â†’ Render

```bash
# 1. Build solver locally
cd backend/pdptw_solver_module
./build_and_test.bat

# 2. Copy solver to bin/
mkdir -p ../bin
cp build/apps/Release/pdptw_solver.exe ../bin/

# 3. Commit & push
git add backend/bin/pdptw_solver.exe
git commit -m "Add compiled solver"
git push

# 4. Deploy on Render
# - Root Directory: backend
# - Build Command: npm install && npm run build
# - Start Command: npm start
```

#### Frontend â†’ Vercel

```bash
# 1. Push to GitHub
git push

# 2. Import on Vercel
# - Root Directory: frontend
# - Framework: Next.js (auto-detected)
# - Set environment variables (NEXT_PUBLIC_*)
```

ğŸ“– **Chi tiáº¿t**: Xem [Deployment Guide](./docs/guides/deployment.md)

---

## ğŸ“š Documentation

### For Developers

- **[Codebase Overview](./docs/ai-context/codebase-overview.md)** - Hiá»ƒu há»‡ thá»‘ng trong 15 phÃºt
- **[Common Tasks](./docs/ai-context/common-tasks.md)** - HÆ°á»›ng dáº«n add API, debug, modify solver
- **[Deployment Guide](./docs/guides/deployment.md)** - Deploy lÃªn Render + Vercel

### For AI Assistants

- **[.ai/config.json](./.ai/config.json)** - Project configuration for AI
- **[AI Context Docs](./docs/ai-context/)** - TÃ i liá»‡u tá»‘i Æ°u cho AI Ä‘á»c hiá»ƒu code

### API Reference

```bash
# Submit job
POST /api/jobs/submit
Body: { instance: string, params: SolverParams }

# Get job status
GET /api/jobs/:jobId

# List jobs
GET /api/jobs?status=completed&limit=10

# Queue stats
GET /api/jobs/stats

# Health check
GET /health
```

ğŸ“– **Full API docs**: [backend/README.md](./backend/README.md)

---

## ğŸ§ª Testing

### Run Tests

```bash
# Backend (coming soon)
cd backend
npm test

# Frontend (coming soon)
cd frontend
npm test

# C++ Solver
cd backend/pdptw_solver_module/build
ctest
```

> âš ï¸ **Note**: Unit tests Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn. Xem [issue #TODO]

---

## ğŸ¤ Contributing

### Development Workflow

1. **Fork** repository
2. **Clone** fork cá»§a báº¡n
3. **Create branch**: `git checkout -b feature/amazing-feature`
4. **Make changes** vÃ  test ká»¹
5. **Commit**: `git commit -m 'Add amazing feature'`
6. **Push**: `git push origin feature/amazing-feature`
7. **Create Pull Request**

### Code Style

- **TypeScript/JavaScript**: Prettier + ESLint (auto-format on save)
- **C++**: Google C++ Style Guide
- **Kotlin**: Kotlin Coding Conventions

### Commit Messages

```
<type>(<scope>): <subject>

Types: feat, fix, docs, style, refactor, test, chore
Examples:
  feat(backend): add PDF export endpoint
  fix(frontend): resolve map rendering issue
  docs(readme): update deployment instructions
```

---

## ğŸ› Troubleshooting

### Backend khÃ´ng khá»Ÿi Ä‘á»™ng

```bash
# Check Node.js version
node --version  # Pháº£i >= 20

# XÃ¡c minh solver path
ls backend/bin/pdptw_solver.exe

# Check logs
npm run dev
```

### Frontend build failed

```bash
# Clear cache
rm -rf .next node_modules
npm install
npm run dev
```

### Solver khÃ´ng cháº¡y

```bash
# Test solver trá»±c tiáº¿p
cd backend/bin
./pdptw_solver.exe --instance ../pdptw_solver_module/instances/lr107.txt
```

ğŸ“– **More**: [Troubleshooting Guide](./docs/guides/troubleshooting.md)

---

## ğŸ“Š Performance

### Solver Benchmarks

| Instance Size | Nodes | Time (avg) | RAM |
|---------------|-------|------------|-----|
| Small | 100 | 5s | 256MB |
| Medium | 400 | 45s | 512MB |
| Large | 1000 | 5min | 2GB |

> Tested on: Intel i7-12700K, 16GB RAM

---

## ğŸ—ºï¸ Roadmap

### âœ… Completed

- [x] C++ PDPTW solver (LNS + Fleet Minimization)
- [x] Backend API vá»›i job queue
- [x] Frontend (dispatch, route visualization)
- [x] Mobile app (Android)
- [x] Supabase integration

### ğŸš§ In Progress

- [ ] Automated testing (Jest, Vitest)
- [ ] CI/CD pipeline (GitHub Actions)
- [ ] Shared types package
- [ ] Better logging (Winston)

### ğŸ“‹ Planned

- [ ] Real-time updates (WebSockets)
- [ ] Route optimization suggestions
- [ ] Multi-tenancy support
- [ ] iOS mobile app
- [ ] Analytics dashboard

---

## ğŸ“„ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¢n phá»‘i dÆ°á»›i giáº¥y phÃ©p **MIT License**. Xem file [LICENSE](./LICENSE) Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

---

## ğŸ‘¥ Team

**WAYO Development Team**

- **Backend & Solver**: [Your Name]
- **Frontend**: [Your Name]
- **Mobile**: [Your Name]

---

## ğŸ™ Acknowledgments

- [CLI11](https://github.com/CLIUtils/CLI11) - Command-line parsing
- [spdlog](https://github.com/gabime/spdlog) - Fast C++ logging
- [shadcn/ui](https://ui.shadcn.com/) - Beautiful UI components
- [Supabase](https://supabase.com/) - Open-source Firebase alternative

---

## ğŸ“ Contact & Support

- **Issues**: [GitHub Issues](https://github.com/yourusername/wayo/issues)
- **Discussions**: [GitHub Discussions](https://github.com/yourusername/wayo/discussions)
- **Email**: support@wayo.com (if applicable)

---

**â­ Náº¿u project nÃ y há»¯u Ã­ch, hÃ£y cho má»™t star nhÃ©!**

[![GitHub stars](https://img.shields.io/github/stars/yourusername/wayo?style=social)](https://github.com/yourusername/wayo)
